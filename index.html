<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoTrack - Bus Tracking System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Styles ici (comme dans votre ancien programme) */
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-bus"></i> NeoTrack Bus</h1>
        
        <div class="pin-input glass-card">
            <label for="pin"><i class="fas fa-lock"></i> Code d'accès</label>
            <input type="password" id="pin" placeholder="• • • •" maxlength="4" />
            <div id="pin-error" class="pin-error">Code incorrect. Veuillez réessayer.</div>
        </div>
        
        <div id="content" class="hidden">
            <div id="user-type-indicator" class="user-type-indicator"></div>
            <div id="status-message" class="status hidden"></div>
            
            <div class="dashboard">
                <!-- Weather Widget -->
                <div class="glass-card">
                    <div class="card-header">
                        <h3>Météo Alger</h3>
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div id="weather-widget" class="weather-widget">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Arrêts de Bus -->
                <div id="bus-stops-card" class="glass-card full-width hidden">
                    <div class="card-header">
                        <h3>Arrêts de Bus</h3>
                        <i class="fas fa-map-signs"></i>
                    </div>
                    <div class="bus-stops" id="bus-stops-buttons">
                        <button class="bus-stop-btn" data-name="Zeralda">Zeralda</button>
                        <button class="bus-stop-btn" data-name="Sidi Abdallah 1">Sidi Abdallah 1</button>
                        <!-- Ajoutez d'autres arrêts ici -->
                    </div>
                </div>

                <!-- Historique des Positions -->
                <div class="glass-card full-width">
                    <div class="card-header">
                        <h3>Historique des Positions</h3>
                        <i class="fas fa-history"></i>
                    </div>
                    <table id="tracking-table">
                        <thead>
                            <tr>
                                <th>Arrêt</th>
                                <th>Heure</th>
                            </tr>
                        </thead>
                        <tbody id="tracking-data">
                            <tr>
                                <td colspan="2" class="loading">Chargement de l'historique...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration Firebase et autres variables ici

        // Fonction pour valider le code PIN
        function validatePin() {
            const pin = pinInput.value;
            if (pin === DRIVER_PIN) {
                // Initialiser le mode chauffeur
                initializeDriverMode();
            } else if (pin === PASSENGER_PIN) {
                // Initialiser le mode passager
                initializePassengerMode();
            } else {
                // Afficher une erreur
                pinError.style.display = 'block';
            }
        }

        // Fonction pour signaler la position du bus
        function signalBusPosition(stopName) {
            // Ajouter la logique pour mettre à jour la position dans Firebase
            console.log(`Bus signalé à l'arrêt: ${stopName}`);
        }

        // Ajouter des écouteurs d'événements pour les boutons d'arrêt
        document.querySelectorAll('.bus-stop-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const stopName = btn.getAttribute('data-name');
                signalBusPosition(stopName);
            });
        });

        // Autres fonctions pour charger les données, etc.
    </script>
</body>
</html>
